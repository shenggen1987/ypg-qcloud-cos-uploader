#!/usr/bin/env node

const path = require('path')
const chalk = require('chalk')
const program = require('commander')
const uploader = require('../lib/uploader')
const docsTip = require('../lib/config').docsTip

program
    .version(require('../package').version)
    .usage(docsTip)

try {
    const config = require('../lib/config').read()
    if (!config) console.error(`config can't be found!${docsTip}`)
    uploader.runUploadTasks(config)
} catch (e) {
    console.log(require('chalk').red(e.message))
}
